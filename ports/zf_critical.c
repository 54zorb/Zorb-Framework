/**
  *****************************************************************************
  * @file    zf_critical.c
  * @author  Zorb
  * @version V1.0.0
  * @date    2018-06-28
  * @brief   硬件相关操作的实现
  *****************************************************************************
  * @history
  *
  * 1. Date:2018-06-28
  *    Author:Zorb
  *    Modification:建立文件
  *
  *****************************************************************************
  */

#include "zf_critical.h"

/* 中断寄存器的值 */
uint32_t ZF_SR;

/******************************************************************************
 * 描述  ：保存中断寄存器的值，然后关中断
 * 参数  ：无
 * 返回  ：中断寄存器的值
******************************************************************************/
__asm uint32_t ZF_SR_Save(void)
{
    MRS     R0, PRIMASK
    CPSID   I
    BX      LR
}

/******************************************************************************
 * 描述  ：恢复中断寄存器的值
 * 参数  ：(in)-sr 中断寄存器的值
 * 返回  ：无
******************************************************************************/
__asm void ZF_SR_Restore(uint32_t sr)
{
    MSR     PRIMASK, R0
    BX      LR
}

/******************************************************************************
 * 描述  ：关闭所有中断(但是不包括fault和NMI中断)
 * 参数  ：无
 * 返回  ：无
******************************************************************************/
__asm void INTERRUPT_DISABLE(void)
{
    CPSID   I
    BX      LR
}

/******************************************************************************
 * 描述  ：开启中断总开关
 * 参数  ：无
 * 返回  ：无
******************************************************************************/
__asm void INTERRUPT_ENABLE(void)
{
    CPSIE   I
    BX      LR
}

/******************************** END OF FILE ********************************/
